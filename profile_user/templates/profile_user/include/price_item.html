<div class="text-center py-4 px-12 bg-primaryi rounded-xl w-full border-2 border-text">
  <h3 class="text-text text-2xl font-extrabold bg-background py-4 rounded-xl">
    {{title}}
  </h3>
  <div class="mt-10">
    <h3 class="text-text text-5xl font-bold">${{price}}</h3>
    <h3 class="text-text text-xl mt-2">all-inclusive</h3>
  </div>
  <div class="mt-10 mb-2">
    {% if user.is_authenticated %} {% if subscription %} 
    {%if subscription_plan == title %}
    {% if subscription_status == 'canceled' %}
    <button
      onclick="mountStripeElement('{{title}}')"
      data-modal-target="staticModal-{{title}}"
      data-modal-toggle="staticModal-{{title}}"
      class="w-full btn-secondary mx-auto mt-3"
    >
      Renew
    </button>
    {% else %}
    <button
      data-modal-target="staticModal-{{title}}"
      data-modal-toggle="staticModal-{{title}}"
      class="pointer-events-none bg-transparentl mx-auto mt-3 text-title bg-primary-light dark:bg-primary-dark text-2xl font-bold px-12 py-3 rounded-xl"
    >
      Cuurent plan
    </button>
    {% endif %}
    

    {% else %}
    <button
      onclick="mountStripeElement('{{title}}')"
      data-modal-target="staticModal-{{title}}"
      data-modal-toggle="staticModal-{{title}}"
      class="w-full btn-secondary mx-auto mt-3"
    >
    {% if subscription_plan == 'MONTHLY' %} Upgrade
    {% elif subscription_plan == 'YEARLY' %} Downgrade
    {% elif title == 'MONTHLY' %} Downgrade
    {% else %} Upgrade
    {% endif %}
    </button>
    {%endif%} {% else %}
    <button
      onclick="mountStripeElement('{{title}}')"
      data-modal-target="staticModal-{{title}}"
      data-modal-toggle="staticModal-{{title}}"
      class="w-full btn-secondary font-semibold"
    >
      Select
      <svg class="h-3.5 w-3.5 ml-1" stroke="currentColor" fill="currentColor" stroke-width="1" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M6.75 1a.75.75 0 0 1 .75.75V8a.5.5 0 0 0 1 0V5.467l.086-.004c.317-.012.637-.008.816.027.134.027.294.096.448.182.077.042.15.147.15.314V8a.5.5 0 1 0 1 0V6.435a4.9 4.9 0 0 1 .106-.01c.316-.024.584-.01.708.04.118.046.3.207.486.43.081.096.15.19.2.259V8.5a.5.5 0 0 0 1 0v-1h.342a1 1 0 0 1 .995 1.1l-.271 2.715a2.5 2.5 0 0 1-.317.991l-1.395 2.442a.5.5 0 0 1-.434.252H6.035a.5.5 0 0 1-.416-.223l-1.433-2.15a1.5 1.5 0 0 1-.243-.666l-.345-3.105a.5.5 0 0 1 .399-.546L5 8.11V9a.5.5 0 0 0 1 0V1.75A.75.75 0 0 1 6.75 1zM8.5 4.466V1.75a1.75 1.75 0 1 0-3.5 0v5.34l-1.2.24a1.5 1.5 0 0 0-1.196 1.636l.345 3.106a2.5 2.5 0 0 0 .405 1.11l1.433 2.15A1.5 1.5 0 0 0 6.035 16h6.385a1.5 1.5 0 0 0 1.302-.756l1.395-2.441a3.5 3.5 0 0 0 .444-1.389l.271-2.715a2 2 0 0 0-1.99-2.199h-.581a5.114 5.114 0 0 0-.195-.248c-.191-.229-.51-.568-.88-.716-.364-.146-.846-.132-1.158-.108l-.132.012a1.26 1.26 0 0 0-.56-.642 2.632 2.632 0 0 0-.738-.288c-.31-.062-.739-.058-1.05-.046l-.048.002zm2.094 2.025z"></path></svg>
    </button>
    {% endif %} {% else %}
    <a
      href="{% url 'register' %}"
      class="btn-primary-landing"
      >Sign up</a
    >
    {% endif %}
  </div>
</div>

<!-- Main modal -->
<div
  id="staticModal-{{title}}"
  data-modal-backdrop="static"
  tabindex="-1"
  aria-hidden="true"
  class="fixed top-0 left-0 right-0 z-50 hidden w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full"
>
  <div class="relative w-full max-w-2xl max-h-full">
    <!-- Modal content -->
    <div class="relative bg-background rounded-lg shadow">
      <!-- Modal header -->
      <div
        class="flex items-center justify-between p-4 border-b rounded-t dark:border-gray-600"
      >
        <h3 class="text-xl font-semibold text-gray-900 dark:text-white">
          Subscribe to the {{title}} plan
        </h3>
        <button
          onclick="unmountStripeElement('{{title}}')"
          type="button"
          class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white"
          data-modal-hide="staticModal-{{title}}"
        >
          <svg
            class="w-5 h-5"
            fill="currentColor"
            viewBox="0 0 20 20"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
              clip-rule="evenodd"
            ></path>
          </svg>
        </button>
      </div>
      <!-- Modal body -->
      <!-- Profits -->
      <div class="max-w-md p-6 m-8 mx-auto mt-1">
        {% include "include/pay_form_stripe.html" %}
      </div>
    </div>
  </div>
</div>
