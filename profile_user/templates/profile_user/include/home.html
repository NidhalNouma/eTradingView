{% load static %}
<h1 class="mt-8 text-left text-3xl sm:text-6xl text-title font-extrabold">Home</h1>

<main class="mt-4 mb-16 md:flex block justify-between ">
    <section class="md:w-9/12">
        <section class="">
            <h6 class="text-left text-title text-lg font-semibold flex items-center justify-between">
            Newest strategies
            <a href="{% url 'strategies' %}" class="text-sm text-secondary px-2.5 py-1 rounded-full border-0 border-secondary">See more &rarr;</a>
            </h6>

            <div class="mt-2 grid xl:grid-cols-4 md:grid-cols-3 grid-cols-2 gap-4">
            {% for strategy in new_strategies %}

            <a href="{% url 'strategy' slug=strategy.slug %}" class="">
                {% if strategy.image_url %}
                <img
                src="{{ strategy.image_url }}"
                alt="Strategy Image"
                class="w-full max-h-64 aspect-video mx-auto rounded-lg"
                />
                {% else %}
                <img
                src="{% static 'images/chart_nobg_l.png' %}"
                alt="Default Image"
                class="w-full max-h-64 aspect-video mx-auto rounded-lg"
                />
                {% endif %}

                <h6 class="mt-1 text-title text-sm  line-clamp-1">{{strategy.name}}</h6>
                <div class="text-text/60 text-xs flex items-center mt-1">
                    <span class="flex items-center mr-2.5">
                        <svg
                            class="w-3.5 aspect-square mr-1"
                            stroke="currentColor"
                            fill="currentColor"
                            stroke-width="0"
                            viewBox="0 0 512 512"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path
                            d="M396.8 352h22.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-22.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-192 0h22.4c6.4 0 12.8-6.4 12.8-12.8V140.8c0-6.4-6.4-12.8-12.8-12.8h-22.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h22.4c6.4 0 12.8-6.4 12.8-12.8V204.8c0-6.4-6.4-12.8-12.8-12.8h-22.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zM496 400H48V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16zm-387.2-48h22.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-22.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8z"
                            ></path>
                        </svg>
                        {{ strategy.strategyresults_set.all|length }}
                    </span>
                    <span class="flex items-center ">
                        <svg
                            class="w-3.5 aspect-square mr-1"
                            stroke="currentColor"
                            fill="currentColor"
                            stroke-width="0"
                            viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path d="M1.75 1h12.5c.966 0 1.75.784 1.75 1.75v9.5A1.75 1.75 0 0 1 14.25 14H8.061l-2.574 2.573A1.458 1.458 0 0 1 3 15.543V14H1.75A1.75 1.75 0 0 1 0 12.25v-9.5C0 1.784.784 1 1.75 1ZM1.5 2.75v9.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h6.5a.25.25 0 0 0 .25-.25v-9.5a.25.25 0 0 0-.25-.25H1.75a.25.25 0 0 0-.25.25Z"></path>
                            <path d="M22.5 8.75a.25.25 0 0 0-.25-.25h-3.5a.75.75 0 0 1 0-1.5h3.5c.966 0 1.75.784 1.75 1.75v9.5A1.75 1.75 0 0 1 22.25 20H21v1.543a1.457 1.457 0 0 1-2.487 1.03L15.939 20H10.75A1.75 1.75 0 0 1 9 18.25v-1.465a.75.75 0 0 1 1.5 0v1.465c0 .138.112.25.25.25h5.5a.75.75 0 0 1 .53.22l2.72 2.72v-2.19a.75.75 0 0 1 .75-.75h2a.25.25 0 0 0 .25-.25v-9.5Z"></path>
                        </svg>
                        {{ strategy.strategycomments_set.all|length }}
                    </span>
                </div>
            </a>

            {% endfor %}
            </div>
        </section>

        {% if new_results|length > 3 %}
        <section class="mt-8">
            <h6 class="text-left text-title text-lg font-semibold flex items-center justify-between">
            Checkout these reuslts
            <a href="{% url 'results' %}" class="text-sm text-secondary px-2.5 py-1 rounded-full border-0 border-secondary">See more &rarr;</a>
            </h6>

            <div class="mt-2 grid xl:grid-cols-4 md:grid-cols-3 grid-cols-2 gap-4">
            {% for result in new_results %}
                <div class="">
                    {% include "include/result_result_page.html" with result=result hide_title="True" %}
                </div>
            {% endfor %}
            </div>
        </section>
        {% endif %}

        <section class="mt-8">
            <h6 class="text-left text-title text-lg font-semibold flex items-center justify-between">
            Most viewed strategies
            <a href="{% url 'strategies' %}" class="text-sm text-secondary px-2.5 py-1 rounded-full border-0 border-secondary">See more &rarr;</a>
            </h6>

            <div class="mt-2 grid xl:grid-cols-4 md:grid-cols-3 grid-cols-2 gap-4">
            {% for strategy in most_viewed_strategies %}

            <a href="{% url 'strategy' slug=strategy.slug %}" class="">
                {% if strategy.image_url %}
                <img
                src="{{ strategy.image_url }}"
                alt="Strategy Image"
                class="w-full max-h-64 aspect-video mx-auto rounded-lg"
                />
                {% else %}
                <img
                src="{% static 'images/chart_nobg_l.png' %}"
                alt="Default Image"
                class="w-full max-h-64 aspect-video mx-auto rounded-lg"
                />
                {% endif %}

                <h6 class="mt-1 text-title text-sm  line-clamp-1">{{strategy.name}}</h6>
                <!-- <span class="text-text/60 text-xs font-semibold">
                    {{ strategy.strategyresults_set.all|length }} Results | {{ strategy.strategycomments_set.all|length }} Ideas
                </span> -->
                <h6 class="text-text/60 text-xs font-light">{{strategy.view_count}} views</h6>
            </a>

            {% endfor %}
            </div>
        </section>



        {% if best_results|length > 6 %}
        <section class="mt-8">
            <h6 class="text-left text-title text-lg font-semibold flex items-center justify-between">
                Best results so far
            <a href="{% url 'results' %}" class="text-sm text-secondary px-2.5 py-1 rounded-full border-0 border-secondary">See more &rarr;</a>
            </h6>

            <div class="mt-2 grid xl:grid-cols-4 md:grid-cols-3 grid-cols-2 gap-4">
            {% for result in best_results %}
                <div class="">
                    {% include "include/result_result_page.html" with result=result hide_title="True" %}
                </div>
            {% endfor %}
            </div>
        </section>
        {% endif %}

        <!-- <section class="mt-8">
            <h6 class="text-left text-title text-lg font-semibold flex items-center justify-between">
            Checkout these ideas
            </h6>

            <div class="mt-2 grid xl:grid-cols-4 md:grid-cols-2 grid-cols-1 gap-4">
            {% for comment in new_ideas %}

                {% include "include/comment_comment_page.html" with comment=comment %}

            {% endfor %}
            </div>
        </section> -->
    </section>

  <section class="w-[20%] hidden md:flex flex-col ">
    <div class="w-full p-2 rounded bg-text/10 relative mb-2 overflow-hidden">    
        <p class="text-text text-xs font-medium">See how you can write alerts to get notified on every action.</p>  
        <a href="{% url 'docs_alerts' %}" class="btn-text mt-2 text-xs font-semibold">Click here <svg class="h-4 aspect-square ml-1" stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" x2="21" y1="14" y2="3"></line></svg></a>
    
        <svg class="h-full absolute right-0 top-0 fill-text/10 scale-110" v stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"></path></svg>
      </div>

    {% for comment in new_ideas %}
        <div class="py-2 mb-4">
            {% include "include/comment_comment_page.html" with comment=comment %}
        </div>
        
    {% endfor %}

        <div class="w-full p-2 rounded relative mb-2 mt-4 bg-[#7289da]/10 overflow-hidden">    
            <p class="text-text text-xs font-medium">Join our Discord Community!</p>  
            <a href="https://discord.gg/wVsXdGSMFg" target="_blank" class="btn-text !from-[#7289da] !to-[#7289da] mt-2 text-xs font-semibold">Join us <svg class="h-4 aspect-square ml-1" stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" x2="21" y1="14" y2="3"></line></svg></a>
        
            <svg class="h-full absolute right-0 top-0  fill-[#7289da]/40 scale-125" stroke-width="0" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M13.545 2.907a13.2 13.2 0 0 0-3.257-1.011.05.05 0 0 0-.052.025c-.141.25-.297.577-.406.833a12.2 12.2 0 0 0-3.658 0 8 8 0 0 0-.412-.833.05.05 0 0 0-.052-.025c-1.125.194-2.22.534-3.257 1.011a.04.04 0 0 0-.021.018C.356 6.024-.213 9.047.066 12.032q.003.022.021.037a13.3 13.3 0 0 0 3.995 2.02.05.05 0 0 0 .056-.019q.463-.63.818-1.329a.05.05 0 0 0-.01-.059l-.018-.011a9 9 0 0 1-1.248-.595.05.05 0 0 1-.02-.066l.015-.019q.127-.095.248-.195a.05.05 0 0 1 .051-.007c2.619 1.196 5.454 1.196 8.041 0a.05.05 0 0 1 .053.007q.121.1.248.195a.05.05 0 0 1-.004.085 8 8 0 0 1-1.249.594.05.05 0 0 0-.03.03.05.05 0 0 0 .003.041c.24.465.515.909.817 1.329a.05.05 0 0 0 .056.019 13.2 13.2 0 0 0 4.001-2.02.05.05 0 0 0 .021-.037c.334-3.451-.559-6.449-2.366-9.106a.03.03 0 0 0-.02-.019m-8.198 7.307c-.789 0-1.438-.724-1.438-1.612s.637-1.613 1.438-1.613c.807 0 1.45.73 1.438 1.613 0 .888-.637 1.612-1.438 1.612m5.316 0c-.788 0-1.438-.724-1.438-1.612s.637-1.613 1.438-1.613c.807 0 1.451.73 1.438 1.613 0 .888-.631 1.612-1.438 1.612"></path></svg>
        </div>
  </section>
</main>
