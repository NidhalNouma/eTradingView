{% load static %}
<h1 class="mt-8 text-left text-3xl sm:text-6xl text-title font-extrabold">Home</h1>

<main class="mt-4 mb-16 md:flex block justify-between">
    <section class="">
        <section class="">
            <h6 class="text-left text-title text-lg font-semibold flex items-center justify-between">
            Newest strategies
            <a href="{% url 'strategies' %}" class="text-sm text-secondary px-2.5 py-1 rounded-full border-0 border-secondary">See more &rarr;</a>
            </h6>

            <div class="mt-2 grid xl:grid-cols-4 md:grid-cols-3 grid-cols-2 gap-4">
            {% for strategy in new_strategies %}

            <a href="{% url 'strategy' slug=strategy.slug %}" class="">
                {% if strategy.image_url %}
                <img
                src="{{ strategy.image_url }}"
                alt="Strategy Image"
                class="w-full max-h-64 aspect-video mx-auto rounded-lg"
                />
                {% else %}
                <img
                src="{% static 'images/chart_nobg_l.png' %}"
                alt="Default Image"
                class="w-full max-h-64 aspect-video mx-auto rounded-lg"
                />
                {% endif %}

                <h6 class="mt-1 text-title text-sm  line-clamp-1">{{strategy.name}}</h6>
                <div class="text-text/60 text-xs flex items-center mt-1">
                    <span class="flex items-center mr-2.5">
                        <svg
                            class="w-3.5 aspect-square mr-1"
                            stroke="currentColor"
                            fill="currentColor"
                            stroke-width="0"
                            viewBox="0 0 512 512"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path
                            d="M396.8 352h22.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-22.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-192 0h22.4c6.4 0 12.8-6.4 12.8-12.8V140.8c0-6.4-6.4-12.8-12.8-12.8h-22.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h22.4c6.4 0 12.8-6.4 12.8-12.8V204.8c0-6.4-6.4-12.8-12.8-12.8h-22.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zM496 400H48V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16zm-387.2-48h22.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-22.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8z"
                            ></path>
                        </svg>
                        {{ strategy.strategyresults_set.all|length }}
                    </span>
                    <span class="flex items-center ">
                        <svg
                            class="w-3.5 aspect-square mr-1"
                            stroke="currentColor"
                            fill="currentColor"
                            stroke-width="0"
                            viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path d="M1.75 1h12.5c.966 0 1.75.784 1.75 1.75v9.5A1.75 1.75 0 0 1 14.25 14H8.061l-2.574 2.573A1.458 1.458 0 0 1 3 15.543V14H1.75A1.75 1.75 0 0 1 0 12.25v-9.5C0 1.784.784 1 1.75 1ZM1.5 2.75v9.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h6.5a.25.25 0 0 0 .25-.25v-9.5a.25.25 0 0 0-.25-.25H1.75a.25.25 0 0 0-.25.25Z"></path>
                            <path d="M22.5 8.75a.25.25 0 0 0-.25-.25h-3.5a.75.75 0 0 1 0-1.5h3.5c.966 0 1.75.784 1.75 1.75v9.5A1.75 1.75 0 0 1 22.25 20H21v1.543a1.457 1.457 0 0 1-2.487 1.03L15.939 20H10.75A1.75 1.75 0 0 1 9 18.25v-1.465a.75.75 0 0 1 1.5 0v1.465c0 .138.112.25.25.25h5.5a.75.75 0 0 1 .53.22l2.72 2.72v-2.19a.75.75 0 0 1 .75-.75h2a.25.25 0 0 0 .25-.25v-9.5Z"></path>
                        </svg>
                        {{ strategy.strategycomments_set.all|length }}
                    </span>
                </div>
            </a>

            {% endfor %}
            </div>
        </section>

        {% if new_results|length > 3 %}
        <section class="mt-8">
            <h6 class="text-left text-title text-lg font-semibold flex items-center justify-between">
            Checkout these reuslts
            <a href="{% url 'results' %}" class="text-sm text-secondary px-2.5 py-1 rounded-full border-0 border-secondary">See more &rarr;</a>
            </h6>

            <div class="mt-2 grid xl:grid-cols-4 md:grid-cols-3 grid-cols-2 gap-4">
            {% for result in new_results %}
                <div class="">
                    {% include "include/result_result_page.html" with result=result hide_title="True" %}
                </div>
            {% endfor %}
            </div>
        </section>
        {% endif %}

        <section class="mt-8">
            <h6 class="text-left text-title text-lg font-semibold flex items-center justify-between">
            Most viewed strategies
            <a href="{% url 'strategies' %}" class="text-sm text-secondary px-2.5 py-1 rounded-full border-0 border-secondary">See more &rarr;</a>
            </h6>

            <div class="mt-2 grid xl:grid-cols-4 md:grid-cols-3 grid-cols-2 gap-4">
            {% for strategy in most_viewed_strategies %}

            <a href="{% url 'strategy' slug=strategy.slug %}" class="">
                {% if strategy.image_url %}
                <img
                src="{{ strategy.image_url }}"
                alt="Strategy Image"
                class="w-full max-h-64 aspect-video mx-auto rounded-lg"
                />
                {% else %}
                <img
                src="{% static 'images/chart_nobg_l.png' %}"
                alt="Default Image"
                class="w-full max-h-64 aspect-video mx-auto rounded-lg"
                />
                {% endif %}

                <h6 class="mt-1 text-title text-sm  line-clamp-1">{{strategy.name}}</h6>
                <!-- <span class="text-text/60 text-xs font-semibold">
                    {{ strategy.strategyresults_set.all|length }} Results | {{ strategy.strategycomments_set.all|length }} Ideas
                </span> -->
                <h6 class="text-text/60 text-xs font-light">{{strategy.view_count}} views</h6>
            </a>

            {% endfor %}
            </div>
        </section>



        {% if best_results|length > 6 %}
        <section class="mt-8">
            <h6 class="text-left text-title text-lg font-semibold flex items-center justify-between">
                Best results so far
            <a href="{% url 'results' %}" class="text-sm text-secondary px-2.5 py-1 rounded-full border-0 border-secondary">See more &rarr;</a>
            </h6>

            <div class="mt-2 grid xl:grid-cols-4 md:grid-cols-3 grid-cols-2 gap-4">
            {% for result in best_results %}
                <div class="">
                    {% include "include/result_result_page.html" with result=result hide_title="True" %}
                </div>
            {% endfor %}
            </div>
        </section>
        {% endif %}

        <!-- <section class="mt-8">
            <h6 class="text-left text-title text-lg font-semibold flex items-center justify-between">
            Checkout these ideas
            </h6>

            <div class="mt-2 grid xl:grid-cols-4 md:grid-cols-2 grid-cols-1 gap-4">
            {% for comment in new_ideas %}

                {% include "include/comment_comment_page.html" with comment=comment %}

            {% endfor %}
            </div>
        </section> -->
    </section>

  <section class="min-w-[12rem] max-w-[22%] hidden md:block pl-10">
    {% for comment in new_ideas %}
        <div class="py-2 mb-4">
            {% include "include/comment_comment_page.html" with comment=comment %}
        </div>
    {% endfor %}
  </section>
</main>
