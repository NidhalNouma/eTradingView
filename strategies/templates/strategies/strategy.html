{% extends 'page.html' %} {% load static %} {% block page %}

<div class="mt-8 flex justify-between">
  <h1 class="text-left text-2xl text-title font-bold">{{ strategy.name }}</h1>
  {% if not subscription %}
  <a href="{% url 'membership' %}" class="btn-accent font-semibold"
    >Get access</a
  >
  {% endif %}
</div>

<main class="mt-8 mb-16 md:flex block justify-between">
  <section class="w-full sm:w-8/12">
    <div class="">
      <img
        class="max-w-full max-h-72 mx-auto"
        src="{% static 'images/chart_nobg.png' %}"
      />
    </div>

    <p class="text-text whitespace-pre-line">{{ strategy.content | safe }}</p>

    <section class="my-6">
      <div class="w-full py-3">
        <button
          id="settingsBtn"
          class="text-sm text-text dark:text-background bg-secondary rounded-xl border-2 border-secondary px-3 py-0.5 hover:bg-secondary hover:dark:text-background"
        >
          {{ strategy.strategyresults_set.all|length }} Results
        </button>
        <button
          id="commentsBtn"
          class="text-sm text-text bg-background rounded-xl border-2 border-secondary px-3 py-0.5 hover:bg-secondary hover:dark:text-background"
        >
          {{ strategy.strategycomments_set.all|length }} Ideas
        </button>
      </div>

      <div class="" id="commentsDiv">{% include "include/comments.html" %}</div>
      <div id="resultsDiv" class="">
        {% include "include/add_result.html" %}
        <div class="" id="settingsDiv">
          {% include "include/results.html" %}
        </div>
      </div>

      <script type="text/javascript">
        const showCommentsBtn = document.getElementById("commentsBtn");
        const showSettingsBtn = document.getElementById("settingsBtn");
        const commentsDiv = document.getElementById("commentsDiv");
        const settingsDiv = document.getElementById("resultsDiv");

        // By default, show the settings div and hide the comments div
        settingsDiv.style.display = "block";
        commentsDiv.style.display = "none";

        // Add event listeners to the buttons
        showCommentsBtn.addEventListener("click", () => {
          // Show the comments div and hide the settings div
          commentsDiv.style.display = "block";
          settingsDiv.style.display = "none";
          showCommentsBtn.classList.add("bg-secondary");
          showCommentsBtn.classList.add("dark:text-background");
          showSettingsBtn.classList.remove("bg-secondary");
          showSettingsBtn.classList.remove("dark:text-background");
        });

        showSettingsBtn.addEventListener("click", () => {
          // Show the settings div and hide the comments div
          settingsDiv.style.display = "block";
          commentsDiv.style.display = "none";

          showCommentsBtn.classList.remove("bg-secondary");
          showCommentsBtn.classList.remove("dark:text-background");
          showSettingsBtn.classList.add("bg-secondary");
          showSettingsBtn.classList.add("dark:text-background");
        });
      </script>
    </section>
  </section>

  <section class="w-3/12 hidden">
    {% comment %}
    <h2 class="text-text text-sm font-semibold mb-2">Results</h2>
    {% endcomment %} {% for i in '01234'|make_list %}
    <div class="rounded-xl py-2 px-4 border-2 border-transparent mb-3">
      <h5 class="text-title text-xs font-bold">PAIR_NAME</h5>
      <div class="text-sm font-bold mt-2">
        <h6 class="text-green-400">
          90% <span class="text-xs text-text">Net profit</span>
        </h6>
        <h6 class="text-green-400">
          51.2% <span class="text-xs text-text">Percent Profitable</span>
        </h6>
        <h6 class="text-green-400">
          0.44 <span class="text-xs text-text">Profit factor</span>
        </h6>
        <h6 class="text-green-400">
          0.62% <span class="text-xs text-text">Max Drawdown</span>
        </h6>
      </div>

      <div class="text-xs pt-3 flex items-center justify-between">
        <button
          data-modal-target="staticModal"
          data-modal-toggle="staticModal"
          class="text-text hover:bg-secondary bg-background rounded-xl font-semibold px-2 border-2 border-secondary"
        >
          View
        </button>
      </div>
    </div>
    {% endfor %}
  </section>

  {% include "include/modal_images_main.html" %}
</main>

{% endblock page %}
